# Generate automatically. Do not edit.

commit bbd0c4dcde10197df1473ffc5641cafe2173a676
Author: Stef Walter <stefw@gnome.org>
Date:   2012-03-09

    Release version 0.12

 NEWS         |    3 +++
 configure.ac |    2 +-
 2 files changed, 4 insertions(+), 1 deletion(-)

commit 300c84133390363a543854e5cd0ac3dd9018544e
Author: Simon Josefsson <simon@josefsson.org>
Date:   2012-03-08

    Fix build problem due to pthread extensions usage
    
    See: http://ipozgaj.blogspot.com/2006/08/posix-threads-and-manual-pages-rant.htm

 configure.ac |    1 +
 1 file changed, 1 insertion(+)

commit 632e268fa86ad8ba55d34044ccc325c20c8fc0c7
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2012-02-07

    Release 0.11

 NEWS           |    3 +++
 configure.ac   |    2 +-
 po/p11-kit.pot |    4 ++--
 3 files changed, 6 insertions(+), 3 deletions(-)

commit 53c34e8ff80500d6ef9366453e88c27a3a52ee46
Author: Stef Walter <stefw@gnome.org>
Date:   2012-01-23

    Remove automatic reinitialization of PKCS#11 after fork
    
     * First of all one should only call async-signal-safe functions
       from the callbacks of pthread_atfork(), and so we cannot
       reinitialize directly.
     * Some modules use pthread_atfork() to detect forking and setup
       their internal state. If we call into them in our pthread_atfork()
       callback then this is inherently racy.
     * There was danger of endless loops and deadlocks which are caused
       by handlers which fork in their C_Initialize
     * Many processes do fork/exec, reinitializing PKCS#11 for these
       forks is quite resourc intensive when the child process won't use
       PKCS#11 at all.

 p11-kit/modules.c |   11 ++---------
 1 file changed, 2 insertions(+), 9 deletions(-)

commit 001d59596a37369d094edcace455f611d9f55908
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2012-01-03

    Release version 0.10

 NEWS         |    3 +++
 configure.ac |    2 +-
 2 files changed, 4 insertions(+), 1 deletion(-)

commit 049e556d043aa6ecfbf32a70dae6e7e5e8eb69d3
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2012-01-02

    Fix build warning on mingw64

 p11-kit/hashmap.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 83dcc15d1d97218004137769ff68e2e8119f1d80
Author: Andreas Metzler <ametzler@downhill.at.eu.org>
Date:   2011-12-23

    Compile CuTest.c separately.
    
    Use regular compile and link instead of having #include "CuTest.c" in
    every test. Works around gcc optimization issue.

 tests/Makefile.am      |   10 +++++++++-
 tests/conf-test.c      |    2 --
 tests/hash-test.c      |    2 --
 tests/pin-test.c       |    2 --
 tests/ptr-array-test.c |    2 --
 tests/test-init.c      |    2 --
 tests/uri-test.c       |    2 --
 7 files changed, 9 insertions(+), 13 deletions(-)

commit 2da833b0ca9539c12745d2f9fef1e7be7c7792dc
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-12-20

    Reorganize tests, work around optimization bug
    
     * Encountered a gcc optimization bug in gcc 4.6.1 which seems to
       be reordering related function calls eroneously. This bug seems
       to be fixed in 4.6.2.
     * Reorganize test code to get around this bug building on mingw,
       and ubuntu 11.10, both of which use gcc 4.6.1

 tests/hash-test.c |   45 ++++++++++++++++++++++-----------------------
 1 file changed, 22 insertions(+), 23 deletions(-)

commit 9328bb7f0aed047dea47e8674e19865d90d423a5
Author: Andreas Metzler <ametzler@downhill.at.eu.org>
Date:   2011-12-09

    Run tests correctly in automake
    
     * This allows failing tests to stop the build

 tests/Makefile.am |    5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

commit 336d8af58ea3d00a20a56937b11236a6bf2679dd
Author: Michael Cronenworth <mike@cchtml.com>
Date:   2011-11-25

    Build fix for MinGW w64

 p11-kit/compat.h |    8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit e18725f71e0f070a54d763cbba7797031828dd95
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-11-14

    Release version 0.9

 NEWS           |    6 ++++++
 configure.ac   |    2 +-
 po/p11-kit.pot |    4 ++--
 3 files changed, 9 insertions(+), 3 deletions(-)

commit d3dfc6968e54b919c90967a486d20066b0f5bf57
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-11-02

    Reduce autofoo dependencies
    
     * automake 1.10 (although can benefit from some 1.11 features)
     * autoconf 2.61

 configure.ac |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 9ccc74f384ee100ec522e012ea543437b1df123c
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-11-01

    An intelligent error message when gettextize is not around

 autogen.sh |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7370d64c18b795a63eda40efcc9e786b821cb7f7
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-10-30

    p11-kit can't be used as a static library
    
     * It just doesn't make sense.
     * The initialization refcounting in particular can only work as
       a shared library.

 configure.ac |    4 ++++
 1 file changed, 4 insertions(+)

commit df0ed92f44fa168c0d02866796f3707687f43214
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-10-29

    Fix problems crashing when freeing TLS on windows

 p11-kit/util.c |    2 ++
 1 file changed, 2 insertions(+)

commit 922d53016955c0ff2d6d830d726f0d1ea3a5804b
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-10-29

    Add debug output to windows init and uninit of library

 p11-kit/util.c |    9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit c940667c434fe64cf4d01cec0873044c54e7f174
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-10-29

    Make build not depend on gtk-doc or pkg-config
    
     * If enabled, gtk-doc can be used, but we no longer expect the
       gtkdoc autoconf/automake macro files to be installed.
     * pkg-config is no longer used for checks.
     * We still do install pkg-config files, and this is the preferred
       way to build against and link to p11-kit.

 configure.ac |   53 +++++++++++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 51 insertions(+), 2 deletions(-)

commit 0792fefb2bc9d5db038b48855f0b1bb138653332
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-10-29

    Handle build case when gettextize is not available or not installed

 autogen.sh |    8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 969bcab592878322e410f4342a61fccc06b9addd
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-10-27

    Fix build with clang
    
     * Just removed some unused functions that used GNUC extensions

 tests/cutest/CuTest.c |   10 ----------
 tests/cutest/CuTest.h |    5 -----
 2 files changed, 15 deletions(-)

commit 77bab108dd2a7d1c55468cc991c22397fb5f8ba5
Author: Dr. Volker Zell <dr.volker.zell@oracle.com>
Date:   2011-10-25

    Fix broken build on cygwin and mingw
    
     * Add correct linking options for libintl

 p11-kit/Makefile.am |    2 ++
 1 file changed, 2 insertions(+)

commit 69f7eaa0508326f07832b91557f9e1ad8e6864c6
Author: Michael Cronenworth <mike@cchtml.com>
Date:   2011-10-25

    Fix broken build on windows
    
     * The debug_init() call needed a rename to _p11_debug_init() to match
       the non-Win32 code.

 p11-kit/util.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 190aee9cdf44d257333d7ef9e29113a07f1516c9
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-10-24

    Release version 0.8

 NEWS           |    7 +++++++
 configure.ac   |    2 +-
 po/p11-kit.pot |    4 ++--
 3 files changed, 10 insertions(+), 3 deletions(-)

commit 138c046a5ff1b0e532896b4d640c0cba6ead4027
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-10-24

    More fixes for non-static function names
    
     * See previous commit
     * Initialize library before debug statements

 p11-kit/conf.c    |    8 +++----
 p11-kit/debug.c   |    7 ------
 p11-kit/debug.h   |   16 +++++++-------
 p11-kit/modules.c |   62 ++++++++++++++++++++++++++---------------------------
 p11-kit/proxy.c   |   14 +++++++-----
 p11-kit/uri.c     |    2 +-
 6 files changed, 53 insertions(+), 56 deletions(-)

commit 5507dc4946f0a68cece5ec9e7096e0f9b8c55984
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-10-24

    Rename non-static functions to have a _p11_xxx prefix.
    
     * Work around issues with brain-dead linkers not respecting
       the libtool -export-symbol-regex argument
    
    https://bugs.freedesktop.org/show_bug.cgi?id=42020

 p11-kit/compat.c       |    8 +--
 p11-kit/compat.h       |   48 +++++++-------
 p11-kit/conf.c         |   36 +++++------
 p11-kit/debug.c        |   17 ++---
 p11-kit/debug.h        |   12 ++--
 p11-kit/hashmap.c      |   68 ++++++++++++--------
 p11-kit/hashmap.h      |   63 ++++++++++---------
 p11-kit/modules.c      |  110 ++++++++++++++++----------------
 p11-kit/pin.c          |   40 ++++++------
 p11-kit/private.h      |    4 +-
 p11-kit/proxy.c        |   18 +++---
 p11-kit/ptr-array.c    |   28 +++++----
 p11-kit/ptr-array.h    |   14 ++---
 p11-kit/uri.c          |    2 +-
 p11-kit/util.c         |   12 ++--
 p11-kit/util.h         |    2 +-
 tests/conf-test.c      |  140 ++++++++++++++++++++---------------------
 tests/hash-test.c      |  162 ++++++++++++++++++++++++------------------------
 tests/mock-module.c    |   10 +--
 tests/ptr-array-test.c |  122 ++++++++++++++++++------------------
 tests/test-init.c      |   22 +++----
 tests/uri-test.c       |    5 +-
 22 files changed, 484 insertions(+), 459 deletions(-)

commit db92b76e3acb11e330309ebce071ec2e61400a71
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-10-17

    Initial port to win32
    
     * Tests do not all yet pass, at least not on wine
     * Added abstraction of some non-portable functions in compat.h/c
     * Build with an argument like this for win32 support:
    	./autogen.sh --host=i586-mingw32msvc
     * This win32 port needs more work from interested parties

 .gitignore          |    3 +
 configure.ac        |   35 ++++++--
 doc/Makefile.am     |    2 +-
 p11-kit/Makefile.am |    1 +
 p11-kit/compat.c    |  114 ++++++++++++++++++++++++++
 p11-kit/compat.h    |  143 ++++++++++++++++++++++++++++++++
 p11-kit/conf.c      |   64 ++++++++++-----
 p11-kit/debug.c     |   31 +++----
 p11-kit/debug.h     |    2 +
 p11-kit/modules.c   |  104 +++++++++++------------
 p11-kit/private.h   |   40 +++++++--
 p11-kit/proxy.c     |    7 +-
 p11-kit/util.c      |  188 ++++++++++++++++++++++++++++++++++--------
 tests/Makefile.am   |   16 ++--
 tests/conf-test.c   |    2 +
 tests/mock-module.c |   20 +++--
 tests/mock-module.h |    1 +
 tests/pin-test.c    |    3 +
 tests/test-init.c   |   56 +++++++------
 tools/Makefile.am   |    4 +
 tools/compat.c      |  228 +++++++++++++++++++++++++++++++++++++++++++++++++++
 tools/compat.h      |   63 ++++++++++++++
 tools/p11-kit.c     |    5 +-
 23 files changed, 952 insertions(+), 180 deletions(-)

commit b1d9fd5f88ade222fbd2206c7e11c5514c8b5634
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-10-10

    Fix up the build options.
    
     * --enable-debug turns off optimization
     * --disable-debug turns off debugging output, debug symbols
     * --enable-strict turns on -Werror

 configure.ac |  123 +++++++++++++++++++++++++++++++---------------------------
 1 file changed, 66 insertions(+), 57 deletions(-)

commit 73880f950a7dadf712730222ac1b6ea11400746f
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-10-10

    Only call C_Initialize and C_Finalize once per module
    
     * Do not concurretnly call C_Initialize or C_Finalize in a module
     * The PKCS#11 spec indicates that mone thread should call those functions.
     * It's reasonable for a module to expect to only be initialized or
       finalized in one thread.
     * In particular NSS does not lock its C_Initialize or C_Finalize.

 p11-kit/modules.c   |  117 +++++++++++++++++++++++++++------------------------
 tests/mock-module.c |    4 +-
 tests/test-init.c   |  105 ++++++++++++++++++++++++++++++++++++++++++++-
 3 files changed, 168 insertions(+), 58 deletions(-)

commit 630ce95d7b9ec3ac3cbe71f75910711369274314
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-10-10

    Combine initialization tests

 tests/Makefile.am      |   14 ++---
 tests/test-fork.c      |  114 --------------------------------------
 tests/test-init.c      |  144 ++++++++++++++++++++++++++++++++++++++++++++++++
 tests/test-recursive.c |   98 --------------------------------
 4 files changed, 148 insertions(+), 222 deletions(-)

commit d5a004ded8a0acdb7aa2100b8e116f19d0d9e402
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-10-10

    Don't allow recursive calling of C_Initialize on a given module.

 p11-kit/modules.c      |    9 ++++-
 tests/Makefile.am      |   10 ++++-
 tests/test-recursive.c |   98 ++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 114 insertions(+), 3 deletions(-)

commit 591c1c14f2ebbcbc3f621456e31e2af1d26820b8
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-10-10

    Rename p11-kit test

 .gitignore        |    2 +
 tests/Makefile.am |    6 +--
 tests/p11-test.c  |  114 -----------------------------------------------------
 tests/test-fork.c |  114 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 119 insertions(+), 117 deletions(-)

commit 85d9078be0456de8014a6f186f3916ddb01792d2
Author: Pino Toscano <pino@debian.org>
Date:   2011-09-30

    Don't use PATH_MAX unless its defined
    
     * Fixes build on GNU/Hurd
    
    https://bugs.freedesktop.org/show_bug.cgi?id=41303

 p11-kit/modules.c |    7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 639aa9e38692ba5001987bb496e10cca14880807
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-09-28

    Print more information in 'p11-kit -l'

 tools/p11-kit.c |   92 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 92 insertions(+)

commit 67b52ed7d7f298f64be5ead41deeeebab1238d47
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-09-27

    Release 0.7

 NEWS           |    5 +++++
 configure.ac   |    2 +-
 po/p11-kit.pot |    4 ++--
 3 files changed, 8 insertions(+), 3 deletions(-)

commit d3e245f579d917d1393624b6ecf3ae0c3748bbb3
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-09-27

    Don't expand p11-kit config variables in configure.
    
     * Expand them later in Makefile and pkg-config file

 configure.ac |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit fcb71c3962314b48e9f8bd7f82673fa4e065607d
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-09-26

    Add test tool to print out error messages
    
     * Allows checking of translations

 .gitignore             |    1 +
 tests/Makefile.am      |    3 +-
 tests/print-messages.c |  137 ++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 140 insertions(+), 1 deletion(-)

commit a1cc80045864777db8c77e711f0a8efaad949c3e
Author: Andreas Metzler <ametzler@downhill.at.eu.org>
Date:   2011-09-26

    Fix quoting of build variables
    
    https://bugs.freedesktop.org/show_bug.cgi?id=40985

 p11-kit/Makefile.am |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit a081b6652acc9d9a9af22a266f9175f689b8c5d1
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-09-19

    Expand the libdir path correctly
    
    https://bugs.freedesktop.org/show_bug.cgi?id=40985

 configure.ac        |    6 ------
 p11-kit/Makefile.am |    9 ++++++++-
 2 files changed, 8 insertions(+), 7 deletions(-)

commit 8054865325fdb2221f3e425d04d9e03f6475553e
Author: Roman Bogorodskiy <bogorodskiy@gmail.com>
Date:   2011-09-15

    Add #include <limits.h> for PATH_MAX to fix compilation on FreeBSD.
    
    https://bugs.freedesktop.org/show_bug.cgi?id=40923

 p11-kit/modules.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 67dc760cec1653e9571b7c4e2bada3992c2b8361
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-09-14

    Release version 0.6

 NEWS           |    5 +++++
 configure.ac   |    2 +-
 po/p11-kit.pot |    4 ++--
 3 files changed, 8 insertions(+), 3 deletions(-)

commit 11f3f0effb14be788e320d2f75b0d2d769058966
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-09-14

    Add documentation about the configuration paths
    
     * Default module path
     * How to lookup paths using pkg-config

 doc/p11-kit-config.xml |   37 ++++++++++++++++++++++---------------
 doc/p11-kit-docs.sgml  |    1 +
 doc/p11-kit-notes.xml  |   48 ++++++++++++++++++++++++++++++++++++++++++++++++
 doc/p11-kit.xml        |    3 +++
 doc/style.css          |    2 ++
 5 files changed, 76 insertions(+), 15 deletions(-)

commit 927d2e5927ddad1eafe94c0bcadd76cd73d6297a
Author: Kalev Lember <kalevlember@gmail.com>
Date:   2011-09-14

    When a module has a relative path, load it from $libdir/pkcs11
    
    So far we have only supported full paths to the pkcs11 modules in config
    files. This change adds relative path support, so that for modules
    installed under the standard $libdir/pkcs11, the config file won't have
    to spell out the full path.

 configure.ac            |    9 +++++++
 p11-kit/modules.c       |   61 ++++++++++++++++++++++++++++++++++++++++++++---
 p11-kit/p11-kit-1.pc.in |    1 +
 3 files changed, 68 insertions(+), 3 deletions(-)

commit 138c1efa9af4893536fb7c3a90d3cb1ac24cea89
Author: Kalev Lember <kalevlember@gmail.com>
Date:   2011-09-14

    Rename pkgconfig configuration directory variables
    
    Renamed them to reduce ambiguity and to pave the way for exposing
    some additional parameters.
    
    p11_system_modules -> p11_system_config_modules
    p11_user_modules   -> p11_user_config_modules
    
    configure --with-pkcs11-dir
    =>
    configure --with-system-config

 configure.ac                   |   50 +++++++++++++++++++++-------------------
 p11-kit/Makefile.am            |    2 +-
 p11-kit/modules.c              |    5 ++--
 p11-kit/p11-kit-1.pc.in        |   10 ++++----
 p11-kit/pkcs11.conf.example.in |    2 +-
 5 files changed, 37 insertions(+), 32 deletions(-)

commit 1cecad87a968ab6441b020fafb95f991b97e84b3
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-08-31

    Release version 0.5

 NEWS           |    5 +++++
 configure.ac   |    2 +-
 po/p11-kit.pot |    4 ++--
 3 files changed, 8 insertions(+), 3 deletions(-)

commit e06009c33616d07a0687d0adbb5c59ec1c8965af
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-08-30

    Don't crash if p11_kit_registered_modules() called after failed init

 p11-kit/modules.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit fbdb10edfa39ada801af187dd3abaa5c8bf2ae6b
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-08-30

    Remove useless typedef

 p11-kit/conf.h |    2 --
 1 file changed, 2 deletions(-)

commit 21b64c68e6a5ffcae50f3561f6dec6ee943a006f
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-08-30

    Add 'critical' setting for modules
    
     * When a module has critical set to 'yes', and that module fails to init
       then it aborts the entire init process.
     * Defaults to 'no'

 doc/p11-kit-config.xml |   24 ++++++++++++++++++++++--
 p11-kit/conf.c         |   18 ++++++++++++++++++
 p11-kit/conf.h         |    3 +++
 p11-kit/modules.c      |    7 ++++++-
 4 files changed, 49 insertions(+), 3 deletions(-)

commit 25512ca5a03d723a84d6de67a7036188d08ec21b
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-08-24

    Fix bugs in the p11-kit proxy module.
    
     * Initialize the mappings properly
     * Lookup session handles correctly
     * Debug initialization and finalization

 p11-kit/debug.c |    1 +
 p11-kit/debug.h |    3 ++-
 p11-kit/proxy.c |   42 ++++++++++++++++++++++++++++--------------
 3 files changed, 31 insertions(+), 15 deletions(-)

commit 61c925fda7385392b3961f0b44049b9ff7a68093
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-08-19

    Release version 0.4

 NEWS           |    8 ++++++++
 configure.ac   |    2 +-
 po/p11-kit.pot |    4 ++--
 3 files changed, 11 insertions(+), 3 deletions(-)

commit ae95625311e98caa3cccf82d24a3b612df11b26d
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-08-19

    Ignore spaces in PKCS#11 URIs
    
     * These should be able to occur anywhere and should be ignored
       according to RFC 3986. This is documented in the PKCS#11 URI
       specification.

 p11-kit/uri.c    |   85 ++++++++++++++++++++++++++++++++++++++++--------------
 p11-kit/uri.h    |    4 +--
 tests/uri-test.c |   24 +++++++++++++++
 3 files changed, 90 insertions(+), 23 deletions(-)

commit d4abb441450deceff760086dcdf9d493b258074a
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-08-14

    Fix endless loop if module forks during initialization.
    
     * If a module forks during its C_Initialize, previously our
       fork handler would try to initialize it again, ad nauseum.
    
    Reported by Nikos on the mailing list.

 .gitignore          |    1 +
 p11-kit/modules.c   |   12 +-
 tests/Makefile.am   |   30 +-
 tests/mock-module.c |  886 +++++++++++++++++++++++++++++++++++++++++++++++++++
 tests/mock-module.h |  336 +++++++++++++++++++
 tests/p11-test.c    |  114 +++++++
 6 files changed, 1354 insertions(+), 25 deletions(-)

commit 43169c520292397439bd70fb74e9505d371f7c72
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-08-14

    Safer initialization of individually initialized module.
    
     * More checks for out of memory.
     * Take more of the same code paths when initializing a single
       module as when initializing registered, or loading from file.
     * Cleanup halfway initialized globals if fail during init.

 p11-kit/modules.c |   36 ++++++++++++++++++++++++++++++------
 1 file changed, 30 insertions(+), 6 deletions(-)

commit 1e2011a308500632a9fbfb541dafcd73d796f3d5
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-08-05

    Update PKCS#11 URI code for new draft of spec
    
     * pinfile attribute was renamed to pin-source
     * objecttype attribute was renamed to object-type
     * secretkey value was renamed to secret-key
    
    We continue to support parsing the old attribute names and values but
    generate URIs with the new ones.

 doc/Makefile.am          |    2 +-
 doc/p11-kit-sections.txt |    2 +
 p11-kit/pin.c            |  126 +++++++++++++++++++++++-----------------------
 p11-kit/pin.h            |   10 ++--
 p11-kit/uri.c            |   83 ++++++++++++++++++++----------
 p11-kit/uri.h            |    9 ++++
 tests/pin-test.c         |   38 +++++++-------
 tests/uri-test.c         |   60 +++++++++++-----------
 8 files changed, 185 insertions(+), 145 deletions(-)

commit 0a2fd044770d645b7707d2b4926a3214147973a8
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-08-03

    Don't fail when duplicate modules are configured.
    
     * Duplicate modules may be caused by editor backups, misconfigurations
       or a multitude of other sources. Failing dead is a bit harsh.
     * After discussing gnutls needs with Nikos

 p11-kit/modules.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3b78f626872c637339a3302b8f0607c778aef92c
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-08-03

    Better debug output for initialization and loading modules.

 p11-kit/modules.c |   11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)

commit ca48cb81f8e1465fdc4e4b504ea9da0324b30658
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-08-03

    Fix broken debug arguments

 p11-kit/modules.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e938d137fee800605b5c11d0c2aa6eae90e205eb
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-08-01

    Add example configuration documentation.
    
     * And also install example pkcs11.conf file.

 .gitignore                     |    1 +
 configure.ac                   |    7 ++++--
 doc/p11-kit-config.xml         |   48 ++++++++++++++++++++++++++++++++++++++++
 p11-kit/Makefile.am            |    6 ++++-
 p11-kit/pkcs11.conf.example.in |    9 ++++++++
 5 files changed, 68 insertions(+), 3 deletions(-)

commit dd6b2c11794a74a33bfa53fec9892cb0c7007e80
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-07-29

    Release version 0.3

 NEWS   |    5 +++++
 README |    9 ++++++++-
 2 files changed, 13 insertions(+), 1 deletion(-)

commit 24d5da1bfa82e296872ae1ef62dbc073780edf20
Author: Roman Bogorodskiy <bogorodskiy@gmail.com>
Date:   2011-07-28

    Fix building with NLS enabled.
    
    https://bugs.freedesktop.org/show_bug.cgi?id=39622

 tests/Makefile.am |   17 +++++++++++------
 tools/Makefile.am |    3 ++-
 2 files changed, 13 insertions(+), 7 deletions(-)

commit 8f4923bcaa66809aa247859b48f2d67d8950097e
Author: Roman Bogorodskiy <bogorodskiy@gmail.com>
Date:   2011-07-28

    Use AC_SEARCH_LIBS instead of AC_CHECK_LIB for dlopen() to fix on *BSD.
    
    https://bugs.freedesktop.org/show_bug.cgi?id=39622

 configure.ac |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b1b63063e0da8518e89b485bc4d2827ba2e3fdcf
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-07-28

    Make p11-kit-proxy.so link point to libp11-kit.so.0.0.0
    
     * The link now points to the actual library, rather than to
       another link.
    
    https://bugzilla.redhat.com/show_bug.cgi?id=725905

 p11-kit/Makefile.am |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit daec3faa85c4f463e3b13688f2bc2bbd1b2ae106
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-07-27

    Add libtool style versioning variables to p11-kit

 configure.ac        |   16 ++++++++++++++++
 p11-kit/Makefile.am |    4 +++-
 po/p11-kit.pot      |    4 ++--
 3 files changed, 21 insertions(+), 3 deletions(-)

commit fb0952dbeb607542b7feab80b1bbd2b1258cd15f
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-07-27

    Fix bug in hashtable rewrite.
    
     * Initialization mixup.

 p11-kit/hashmap.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9add486d5bbb2ac6a3566e21d729107c26de77a3
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-07-27

    Cleanup documentation warnings
    
     * After recent hash table rewrite we should be ignoring the new
       file.

 doc/Makefile.am |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 4454fc36a0dd9b6e99e302769084b2964eef34c1
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-07-27

    Create a link for the proxy module.
    
     * Install proxy module at its own path which is not prefixed by 'lib'
     * Since the proxy module is the same as the library, and actually
       needs to be loaded as the same library in memory (due to resource
       tracking per process), use a symlink for proxy.
     * Add a variable to the pkg-config file which shows the path
       to the proxy module. ie:
       $ pkg-config --variable=proxy_module p11-kit-1
    
    https://bugzilla.redhat.com/show_bug.cgi?id=725905

 p11-kit/Makefile.am     |    6 +++++-
 p11-kit/p11-kit-1.pc.in |    1 +
 2 files changed, 6 insertions(+), 1 deletion(-)

commit 308a776372eb1560480fbfcb5ef9d918a7a1454f
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-07-27

    Reimplement and remove apache licensed bits of code.
    
     * Reimplement the various bits of the hash table that were
       still based on the apache apr code. Use different algorithms
       for hashing, lookup and other stuff.
     * Use this as an opportunity to cleanup that code and make
       it more legible.
    
    https://bugzilla.redhat.com/show_bug.cgi?id=725905

 COPYING             |   22 +--
 p11-kit/Makefile.am |    2 +-
 p11-kit/conf.c      |   50 +++---
 p11-kit/conf.h      |   12 +-
 p11-kit/hash.c      |  473 ---------------------------------------------------
 p11-kit/hash.h      |  195 ---------------------
 p11-kit/hashmap.c   |  372 ++++++++++++++++++++++++++++++++++++++++
 p11-kit/hashmap.h   |  172 +++++++++++++++++++
 p11-kit/modules.c   |   62 +++----
 p11-kit/pin.c       |    6 +-
 p11-kit/proxy.c     |    8 +-
 tests/conf-test.c   |   64 +++----
 tests/hash-test.c   |  158 ++++++++---------
 13 files changed, 726 insertions(+), 870 deletions(-)

commit 3bb86b72ca5882b1e5684db837c75df810f283c3
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-07-21

    Expand the various pkcs11 config paths properly.
    
     * Without this the ${prefix} part of the variable wasn't being
       expanded and was making it into the #define.

 configure.ac |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 4a3a1e0b8ad676f057e4fb141b4692987e8ce558
Author: Colin Walters <walters@verbum.org>
Date:   2011-07-18

    configure: Use $sysconfdir for p11_system_conf dir, not hardcoded /etc
    
    If the user specified sysconfdir, we should respect it.  Don't
    hardcode /etc.  This is important for jhbuild, which uses
    /path/to/builddir/etc.

 configure.ac |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 43cf13e1a25da76297cd3397569031d7c3fd3a09
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-07-19

    Ignore some built files after recent changes.

 .gitignore |    2 ++
 m4/.empty  |    1 +
 m4/empty   |    1 -
 3 files changed, 3 insertions(+), 1 deletion(-)

commit b59ab92e640e13d10484fffc74ed6a218930c6ab
Author: Colin Walters <walters@verbum.org>
Date:   2011-07-18

    build: Make autogen.sh work
    
    * We were missing a call to gettextize, which is what copies in config.rpath
    * Delete ABOUT-NLS, it is copied in by gettextize
    * While we're here, take a page from gtk+'s autogen.sh and just use autoreconf,
      instead of specifying everything.
    * We need to always have an m4/ directory, so that gettextize works,
      so we make a dummy empty file
    * Apparently gettextize is totally insane, requiring user input etc.  Copy
      in some hacks from Avahi's autogen.sh to work around this.

 .gitignore |    1 -
 ABOUT-NLS  | 1281 ------------------------------------------------------------
 autogen.sh |   17 +-
 m4/empty   |    1 +
 4 files changed, 12 insertions(+), 1288 deletions(-)

commit 69dd8b722bcb1a76ff586e71c580f6844412abb9
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-07-12

    pin: Fix uninitialized variable

 p11-kit/pin.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 087a815b2b9cd5e0ec44866be1ddddb948583e88
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-07-07

    Bump version number, and tweak upload procedure

 .gitignore   |    1 +
 Makefile.am  |    3 ++-
 configure.ac |    2 +-
 3 files changed, 4 insertions(+), 2 deletions(-)

commit e27e943b83401515b8b6acc1da705df6c56416e1
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-07-07

    Release version 0.2

 NEWS           |    6 ++++++
 configure.ac   |    2 +-
 po/p11-kit.pot |    2 +-
 3 files changed, 8 insertions(+), 2 deletions(-)

commit 98ba6f9ffb95c5473e5e32d296956e91c4fc2715
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-07-06

    List labels of all tokens in 'p11-kit -l'

 tools/p11-kit.c |   34 ++++++++++++++++++++++++++++++++--
 1 file changed, 32 insertions(+), 2 deletions(-)

commit 883b3ee76c686d14bbc1f20b0805d733a0c227ad
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-07-06

    More fine tuning of the pin APIs.

 doc/p11-kit-sections.txt |    1 +
 p11-kit/pin.c            |   18 ++++++++++++++++--
 p11-kit/pin.h            |    4 +++-
 3 files changed, 20 insertions(+), 3 deletions(-)

commit 1ff1a4895b2d5ff5fe559b96034fb1c3855d4b45
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-24

    Add documentation for PIN callbacks.

 doc/Makefile.am          |    2 +-
 doc/p11-kit-docs.sgml    |    1 +
 doc/p11-kit-sections.txt |   19 +++
 p11-kit/pin.c            |  328 +++++++++++++++++++++++++++++++++++++---------
 p11-kit/pin.h            |    4 +-
 tests/pin-test.c         |   18 +--
 6 files changed, 295 insertions(+), 77 deletions(-)

commit fd7dee836d0b14efc48bf59955c8a12a72561043
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-24

    Add P11KitPin structure, which encapsulates a returned pin.
    
     * Lets us use variable size buffers.
     * Helps minimize copying.

 p11-kit/pin.c            |  171 ++++++++++++++++++++++++++++++++++++++++++----
 p11-kit/pin.h            |   44 ++++++++----
 tests/files/test-pinfile |    1 +
 tests/pin-test.c         |  161 +++++++++++++++++++++++++++++--------------
 4 files changed, 302 insertions(+), 75 deletions(-)

commit 2cc2ab90a6b96ea75dfe4d6413e41539075e8f8a
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-21

    Rename p11_kit_pin_read_pinfile to p11_kit_pin_retrieve
    
     * Fix up duplicate register logic as well.

 p11-kit/pin.c    |   13 +++++++------
 p11-kit/pin.h    |    4 ++--
 tests/pin-test.c |   38 +++++++++++++++++++-------------------
 3 files changed, 28 insertions(+), 27 deletions(-)

commit f1ca5d5b57909534d8b21f9be455c94ca57e6636
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-20

    Implement support for registering and calling pinfile callbacks
    
     * These are callbacks that hanlde the pinfile part of a PKCS#11 URI.
     * One library can register a callback that another can then call
       in a thread-safe and simple fashion.

 .gitignore             |    2 +
 p11-kit/Makefile.am    |    3 +
 p11-kit/pin.c          |  332 ++++++++++++++++++++++++++++++++++++++++++++++++
 p11-kit/pin.h          |   85 +++++++++++++
 p11-kit/ptr-array.c    |  150 ++++++++++++++++++++++
 p11-kit/ptr-array.h    |   61 +++++++++
 tests/Makefile.am      |   12 +-
 tests/pin-test.c       |  237 ++++++++++++++++++++++++++++++++++
 tests/ptr-array-test.c |  259 +++++++++++++++++++++++++++++++++++++
 9 files changed, 1140 insertions(+), 1 deletion(-)

commit 0a793a9e462727f434f6283a712b37ab30df5e95
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-16

    Fix logic error loading registered modules.
    
    Thanks to Richard Bellgrim.

 p11-kit/modules.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b1b62f1b0856821d046ed92be076f9b9f8c664a9
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-09

    Update pkcs11.h with PKCS#11 2.20 ammendments.

 p11-kit/pkcs11.h |   22 +++++++++++++++++++---
 1 file changed, 19 insertions(+), 3 deletions(-)

commit 6d36c108a0f00f7485967b528b2a9f7c22173a5b
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-09

    Fixed typos and made options clearer.

 doc/p11-kit-config.xml |    6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit d941244aaf0cf142fee986eb914c2767f564dc14
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-09

    By default use /etc/pkcs11 for system configs and not ${prefix}
    
     * Packagers can override this with the --with-pkcs11-dir configure arg.

 configure.ac |   17 +++++++++++++++--
 1 file changed, 15 insertions(+), 2 deletions(-)

commit 4bb63ced295ddd64a019ae49cfae191524a34f07
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-09

    Complete documentation for message functionality.

 doc/p11-kit-docs.sgml    |    1 +
 doc/p11-kit-sections.txt |    6 ++++++
 p11-kit/modules.c        |   15 +++++++++++++++
 p11-kit/util.c           |   29 +++++++++++++++++++++++++++++
 4 files changed, 51 insertions(+)

commit d6463e70eeb0ad3d93788a3e0f13e2007be54c50
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-09

    Complete testing of global config files and directories.

 tests/conf-test.c                    |  262 ++++++++++++++++++++++++++++++++++
 tests/files/system-modules/one       |    3 +
 tests/files/system-modules/two       |    3 +
 tests/files/test-system-invalid.conf |    3 +
 tests/files/test-system-merge.conf   |    7 +
 tests/files/test-system-none.conf    |    8 ++
 tests/files/test-system-only.conf    |    8 ++
 tests/files/test-user-invalid.conf   |    3 +
 tests/files/test-user-only.conf      |    4 +
 tests/files/test-user.conf           |    3 +
 tests/files/user-modules/one         |    2 +
 tests/files/user-modules/three       |    3 +
 12 files changed, 309 insertions(+)

commit 48a08272bfcc0153887b850b4ea82e8fb7d8f1ae
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-09

    Store last failure message per thread.
    
     * Add p11_kit_message() function to get last message.

 doc/p11-kit-config.xml |    2 +-
 p11-kit/Makefile.am    |    3 +-
 p11-kit/conf.c         |   22 ++++++------
 p11-kit/modules.c      |   46 ++++++++++++++++++-------
 p11-kit/p11-kit.h      |    8 +++++
 p11-kit/private.h      |    6 ++--
 p11-kit/util.c         |   87 +++++++++++++++++++++++++++++++++++++++++++++---
 tests/Makefile.am      |    3 +-
 tests/conf-test.c      |   13 ++++----
 9 files changed, 151 insertions(+), 39 deletions(-)

commit 21333019a5afceb5f07637fb50b784a4ecd9f9ff
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-08

    Refactor configuration
    
     * Move configuration loading into conf.c
     * Have user modules with same name merge/override modules in system.

 p11-kit/Makefile.am |    2 +-
 p11-kit/conf.c      |  429 ++++++++++++++++++++++++++++++++++++++++++++++-----
 p11-kit/conf.h      |   24 ++-
 p11-kit/hash.c      |  117 ++++++++------
 p11-kit/hash.h      |   10 +-
 p11-kit/modules.c   |  366 ++++++++-----------------------------------
 p11-kit/private.h   |   11 ++
 p11-kit/util.c      |   17 ++
 tests/conf-test.c   |   40 +++--
 9 files changed, 610 insertions(+), 406 deletions(-)

commit 7c1edab7e6c1c6939ecdeaefc5f006772298f9eb
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-08

    Ignore files without a 'module' value.
    
     * Just skip loading these.

 p11-kit/modules.c |   11 ++++-------
 1 file changed, 4 insertions(+), 7 deletions(-)

commit d6b8300fe9bae0595aaf894c5d98aa7c72209e38
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-07

    Bump version number.

 configure.ac   |    6 +++++-
 po/p11-kit.pot |    4 ++--
 2 files changed, 7 insertions(+), 3 deletions(-)

commit 5b77fb058c43e6b0b631e1c7df41994cc41cd2ac
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-07

    Make target for uploading release.

 Makefile.am |    3 +++
 1 file changed, 3 insertions(+)

commit bfac05a80d66668a617386e7fdf569b5eb381a93
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-07

    Release version 0.1

 p11-kit/Makefile.am |    3 +++
 po/p11-kit.pot      |    5 +++--
 2 files changed, 6 insertions(+), 2 deletions(-)

commit cab38f1cb262e7922098fdb03c2c5828f5f003a1
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-07

    Fix up documentation

 doc/p11-kit-sections.txt |    5 ++++-
 p11-kit/util.c           |   41 +++++++++++++++++++++++++++++++++++++++++
 2 files changed, 45 insertions(+), 1 deletion(-)

commit b9a8a140cf09780671402e872130a51ec4f4b014
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-07

    Add p11_kit_space_strdup() function, and rename p11_kit_space_strlen()
    
     * Print out module info in p11-kit tool.

 p11-kit/p11-kit.h |    6 ++++++
 p11-kit/uri.c     |   15 ++-------------
 p11-kit/uri.h     |    3 ---
 p11-kit/util.c    |   34 ++++++++++++++++++++++++++++++++++
 tools/p11-kit.c   |   28 +++++++++++++++++++++++++++-
 5 files changed, 69 insertions(+), 17 deletions(-)

commit b315f99c90d01104d6baa91ca0f2cfb32c920abd
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-07

    Fix more memory errors and leaks in module code.

 p11-kit/modules.c |   16 ++++++++++++----
 tools/p11-kit.c   |    3 +++
 2 files changed, 15 insertions(+), 4 deletions(-)

commit 7f5d2e9471872d8c1cf7181ba647c1dc74e2c6dd
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-07

    Free string output of conf-test

 tests/conf-test.c |    1 +
 1 file changed, 1 insertion(+)

commit fb8b8cada7bad73acf936c1dee2e7b1be64e3513
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-07

    Fix URI parsing memory leaks.

 p11-kit/uri.c    |    1 +
 tests/uri-test.c |    1 +
 2 files changed, 2 insertions(+)

commit 7c410200143b72a5976d228d75aab59f8b965fe9
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-07

    Fix some hash leaks and bugs.

 p11-kit/hash.c    |   20 ++++++++++++--------
 tests/hash-test.c |   39 +++++++++++++++++++++++++++++++++++++--
 2 files changed, 49 insertions(+), 10 deletions(-)

commit 0f09803ba95bcdfebf4bde509b43b3ca52cd9d3f
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-07

    Fix compiler warnings.

 p11-kit/hash.c   |    2 +-
 tests/uri-test.c |    1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

commit a5d3e34397d847a0c9b2e3aab7bd9f0b1080af05
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-07

    Remove unstable API markers.

 p11-kit/Makefile.am |    3 ---
 p11-kit/p11-kit.h   |    9 ---------
 p11-kit/uri.h       |    9 ---------
 tests/Makefile.am   |    3 +--
 tools/Makefile.am   |    3 +--
 5 files changed, 2 insertions(+), 25 deletions(-)

commit edf0b9584f1038797758b4ed878e1d9f48beda9f
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-06-06

    Modernize autotools setup.

 .gitignore   |    1 +
 configure.ac |   13 ++++++-------
 2 files changed, 7 insertions(+), 7 deletions(-)

commit 0bd6cf376133f300edff57835eb95f7577d68792
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-05-30

    Clear correct block of memory in p11_kit_uri_parse().

 p11-kit/uri.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6f1e963901ca7aff7af6bec376af00f892cbb9ca
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-05-30

    GNU style definitions in uri.h as well as normal.

 p11-kit/uri.h |   26 ++++++++++++++------------
 1 file changed, 14 insertions(+), 12 deletions(-)

commit 82ca953733a651216125608d5ca7f9aa8005095e
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-05-30

    Cleanup URI types
    
     * Support with/without library version.
     * Make names of types clearer.

 p11-kit/uri.c    |   63 ++++++++++++++++++++++++++++------------
 p11-kit/uri.h    |   18 +++++++++---
 tests/uri-test.c |   84 +++++++++++++++++++++++++++---------------------------
 3 files changed, 101 insertions(+), 64 deletions(-)

commit e19300129d3fe21c9e3af1a7f95ccf3eb5315199
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-05-30

    Set the return value properly in p11_kit_load_initialize_module()

 p11-kit/modules.c |    3 +++
 1 file changed, 3 insertions(+)

commit b3b68fcb1d3fc4958acc6f6528fb88e7c87b7512
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-05-30

    Add function p11_kit_uri_space_strlen() for figuring out the length
    of space terminated strings.

 doc/p11-kit-sections.txt |    1 +
 p11-kit/uri.c            |    6 +++---
 p11-kit/uri.h            |    3 +++
 3 files changed, 7 insertions(+), 3 deletions(-)

commit 2aa964160a1615077db18b03a6c72c286c27791f
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-05-30

    Allow use with CRYPTOKI_GNU style use of PKCS#11

 doc/p11-kit-sections.txt |   10 +++++++++-
 p11-kit/p11-kit.h        |   11 ++++++++++-
 p11-kit/uri.c            |    2 +-
 p11-kit/uri.h            |   14 +++++++++++++-
 4 files changed, 33 insertions(+), 4 deletions(-)

commit cfeaf3de3d745d457feaba48c532d7a384d67341
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-05-27

    Add p11_kit_load_initialize_module() function.
    
     * This function will load a module from a file path, and then
       initialize it.

 doc/p11-kit-sections.txt |    1 +
 p11-kit/modules.c        |  167 +++++++++++++++++++++++++++++++++++++++-------
 p11-kit/p11-kit.h        |    3 +
 3 files changed, 147 insertions(+), 24 deletions(-)

commit f03252bf032b04ed7a5b98ea52e3c75d84dc0812
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-05-27

    Rename module arguments from 'funcs' to 'module'

 p11-kit/modules.c |  244 ++++++++++++++++++++++++++---------------------------
 p11-kit/p11-kit.h |    8 +-
 2 files changed, 126 insertions(+), 126 deletions(-)

commit 5d697e5ff8e3222bdb67d0ce8444b0323eeaba69
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-05-27

    Fix up documentation

 doc/p11-kit-sections.txt |    9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

commit a2fbdb1a3cd9d137010182be43fdf4ff8491dd9f
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-05-27

    Fix problems with 'make distcheck'

 Makefile.am       |    4 ++++
 doc/Makefile.am   |    3 ++-
 gtk-doc.make      |    9 +++++----
 tests/Makefile.am |    8 ++++++--
 4 files changed, 17 insertions(+), 7 deletions(-)

commit ad14c9c4c1345fe01336fc0d5bfccd3fca248ce1
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-05-27

    Fix uninitialized variable problem.

 p11-kit/proxy.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bdd6188e299405e16179906bc79f9fef2605176a
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-05-27

    Change around installation of headers, pkg-config, and file names
    
     * Install headers to ${prefix}/include/p11-kit-1/p11-kit/
     * This solves problems with other projects that have their own
       pkcs11.h files.
     * Change the pkg-config file name to p11-kit-1.pc
     * Change the source file names.

 .gitignore                 |    6 +-
 configure.ac               |    4 +-
 doc/Makefile.am            |    4 +-
 p11-kit/Makefile.am        |   18 +-
 p11-kit/debug.h            |    4 +-
 p11-kit/messages.c         |  242 ++++++++
 p11-kit/modules.c          | 1195 ++++++++++++++++++++++++++++++++++++++
 p11-kit/p11-kit-1.pc.in    |   17 +
 p11-kit/p11-kit-lib.c      | 1195 --------------------------------------
 p11-kit/p11-kit-messages.c |  242 --------
 p11-kit/p11-kit-private.h  |   52 --
 p11-kit/p11-kit-proxy.c    | 1382 --------------------------------------------
 p11-kit/p11-kit-uri.c      | 1337 ------------------------------------------
 p11-kit/p11-kit-uri.h      |  135 -----
 p11-kit/p11-kit.h          |    2 +-
 p11-kit/p11-kit.pc         |   17 -
 p11-kit/p11-kit.pc.in      |   17 -
 p11-kit/private.h          |   52 ++
 p11-kit/proxy.c            | 1382 ++++++++++++++++++++++++++++++++++++++++++++
 p11-kit/uri.c              | 1337 ++++++++++++++++++++++++++++++++++++++++++
 p11-kit/uri.h              |  135 +++++
 po/POTFILES.in             |    2 +-
 po/p11-kit.pot             |  164 +++---
 tests/uri-test.c           |    2 +-
 24 files changed, 4465 insertions(+), 4478 deletions(-)

commit 92f821b6883e700a97a18d244104dea1031f2dce
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-05-26

    Add functions for clearing and setting multiple attributes on URI.

 p11-kit/p11-kit-uri.c |   75 +++++++++++++++++++++++++++++++++++--------------
 p11-kit/p11-kit-uri.h |   12 ++++++--
 tests/uri-test.c      |   41 ++++++++++++++++++++++++---
 3 files changed, 100 insertions(+), 28 deletions(-)

commit c37d5dfaf0c2a5e70066fd1c9606b00329c3622a
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-05-26

    Return proper errors when NULL is passed to mutex functions.

 p11-kit/p11-kit-lib.c |   12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 0542a87afdacd2c53da5d453b1d23e8a0dd91ea4
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-05-26

    URI API fine tuning
    
     * Rework API for getting all the attributes, to match usage in PKCS#11
     * Add support for pinfile argument in URIs.
     * Complete tests.

 p11-kit/p11-kit-uri.c |  365 +++++++++++++++++++++++++++++--------------------
 p11-kit/p11-kit-uri.h |    9 +-
 tests/uri-test.c      |  103 ++++++++++++++
 3 files changed, 328 insertions(+), 149 deletions(-)

commit 7c2a8a5b3ad134b6e3093761d617936dcbd21adf
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-05-25

    Add p11_kit_uri_message() function.
    
    Gets messages for p11-kit error codes.

 p11-kit/debug.c       |    1 +
 p11-kit/debug.h       |    3 ++-
 p11-kit/p11-kit-uri.c |   38 ++++++++++++++++++++++++++++++++++++++
 p11-kit/p11-kit-uri.h |    2 ++
 4 files changed, 43 insertions(+), 1 deletion(-)

commit a01f4351e34fee946d1ffb81baa31a756e2851be
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-05-24

    Fix null pointer dereference.

 p11-kit/p11-kit-lib.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e16a0a7183bd7c400ea3df12ad6ee1155a17634c
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-04-05

    Fix lots of bugs and add more debugging statements.

 p11-kit/conf.c        |    3 ++-
 p11-kit/p11-kit-lib.c |   51 +++++++++++++++++++++++++++++++++++++++----------
 2 files changed, 43 insertions(+), 11 deletions(-)

commit 4d7cf526a352d7c9a02d05a308eef937b1a8987d
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-04-05

    Add basic tool for p11-kit.
    
    List modules:
     $ p11-kit -l

 .gitignore        |    2 +
 Makefile.am       |    1 +
 configure.ac      |    1 +
 tools/Makefile.am |   12 ++++++
 tools/p11-kit.c   |  121 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 137 insertions(+)

commit 6078d6d73bc2eb1dbf2283b37d9507297fefba9d
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-04-05

    Add support for debug tracing.
    
    Use P11_KIT_DEBUG=xxx environment variable to enable tracing. Must
    have been built without --disable-debug option.
    
    P11_KIT_DEBUG can (at this point) be one of these values:
     all
     help
     conf
     lib

 .gitignore            |    1 +
 configure.ac          |   23 ++++++---
 doc/Makefile.am       |    2 +-
 p11-kit/Makefile.am   |    1 +
 p11-kit/conf.c        |    7 +++
 p11-kit/debug.c       |  136 +++++++++++++++++++++++++++++++++++++++++++++++++
 p11-kit/debug.h       |   93 +++++++++++++++++++++++++++++++++
 p11-kit/p11-kit-lib.c |   17 ++++++-
 8 files changed, 272 insertions(+), 8 deletions(-)

commit aada8e3d41c3be7cdc7e0994c7dff7c307fbbe7f
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-04-01

    Fix up copyright lines.

 p11-kit/conf.c            |    4 ++--
 p11-kit/conf.h            |    4 ++--
 p11-kit/hash.c            |    4 ++--
 p11-kit/hash.h            |    4 ++--
 p11-kit/p11-kit-lib.c     |    2 +-
 p11-kit/p11-kit-private.h |    2 +-
 p11-kit/p11-kit-proxy.c   |    2 +-
 p11-kit/p11-kit-uri.h     |    2 +-
 p11-kit/p11-kit.h         |    2 +-
 p11-kit/util.c            |    1 -
 p11-kit/util.h            |    1 -
 11 files changed, 13 insertions(+), 15 deletions(-)

commit 579d40eff31c7a17cc4e4f07d26c6189619fee31
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-03-31

    Add C++ header guards, and require API instability acknowledgement.

 p11-kit/Makefile.am   |    3 +++
 p11-kit/p11-kit-uri.h |   23 ++++++++++++++++++++---
 p11-kit/p11-kit.h     |   17 +++++++++++++++++
 tests/Makefile.am     |    3 ++-
 4 files changed, 42 insertions(+), 4 deletions(-)

commit cf988aa7858d249887ea0818301c7211bb3cab38
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-03-31

    Support setting of CK_C_INITIALIZE_ARGS.pReserved to string.
    
    This is a naughty little thing that a lot of PKCS#11 modules require
    to be properly initialized. So we support setting pReserved to a string
    that is in the config under the 'x-init-reserved' parameter.

 p11-kit/p11-kit-lib.c |    7 +++++++
 1 file changed, 7 insertions(+)

commit 540a00501ba682b420b143480d5864335cad6c71
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-03-31

    Give reference chapter an explicit id.

 doc/p11-kit-docs.sgml |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 52dab5cd52b19352e9f29b16c686fc545d2aadf1
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-03-31

    Add make target for uploading docs.

 Makefile.am |    6 ++++++
 1 file changed, 6 insertions(+)

commit a0ef9771b882bf2dc5bd56fcc6bcfdf47ed90feb
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-03-31

    Mix in other documentation.

 doc/Makefile.am                  |    2 +-
 doc/p11-kit-config.xml           |   10 +++--
 doc/p11-kit-docs.sgml            |   12 +++--
 doc/p11-kit-multiple-problem.xml |   92 --------------------------------------
 doc/p11-kit-sharing.xml          |   92 ++++++++++++++++++++++++++++++++++++++
 doc/style.css                    |   17 ++++---
 6 files changed, 117 insertions(+), 108 deletions(-)

commit ca1d8a09e05444de07a1ad722b57f5dcae042892
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-03-31

    Fix up styling and tweaks.

 doc/style.css              |   24 +++++++++++++++++-------
 p11-kit/p11-kit-messages.c |    4 ++--
 2 files changed, 19 insertions(+), 9 deletions(-)

commit 17ebc007ed0376bdea50294201a637be982d68b7
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-03-31

    Fix up styling of documentation.

 doc/p11-kit-docs.sgml |    2 +-
 doc/style.css         |   70 +++++++++++++++++++++++++++++++++++++++++++++++++
 gtk-doc.make          |    4 ++-
 3 files changed, 74 insertions(+), 2 deletions(-)

commit 479cbd55ee5739d3cd2566379575451dbecf4c54
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-03-31

    Documentation and API cleanup.
    
     * Rename source directory
     * More consistent with return values from URI functions.
     * Allow formatting URI to take a uri type.

 .gitignore                 |   17 +
 Makefile.am                |    6 +-
 configure.ac               |   17 +-
 doc/Makefile.am            |   80 ++-
 doc/p11-kit-docs.sgml      |   24 +
 doc/p11-kit-sections.txt   |   40 ++
 doc/version.xml.in         |    1 +
 gtk-doc.make               |  230 ++++++++
 module/Makefile.am         |   41 --
 module/conf.c              |  245 --------
 module/conf.h              |   51 --
 module/hash.c              |  453 ---------------
 module/hash.h              |  187 ------
 module/p11-kit-lib.c       | 1081 ----------------------------------
 module/p11-kit-messages.c  |  234 --------
 module/p11-kit-private.h   |   52 --
 module/p11-kit-proxy.c     | 1382 --------------------------------------------
 module/p11-kit-uri.c       |  951 ------------------------------
 module/p11-kit-uri.h       |  104 ----
 module/p11-kit.h           |   59 --
 module/p11-kit.pc.in       |   17 -
 module/pkcs11.h            | 1357 -------------------------------------------
 module/util.c              |   51 --
 module/util.h              |   45 --
 p11-kit/Makefile.am        |   40 ++
 p11-kit/conf.c             |  245 ++++++++
 p11-kit/conf.h             |   51 ++
 p11-kit/hash.c             |  452 +++++++++++++++
 p11-kit/hash.h             |  187 ++++++
 p11-kit/p11-kit-lib.c      | 1130 ++++++++++++++++++++++++++++++++++++
 p11-kit/p11-kit-messages.c |  242 ++++++++
 p11-kit/p11-kit-private.h  |   52 ++
 p11-kit/p11-kit-proxy.c    | 1382 ++++++++++++++++++++++++++++++++++++++++++++
 p11-kit/p11-kit-uri.c      | 1195 ++++++++++++++++++++++++++++++++++++++
 p11-kit/p11-kit-uri.h      |  105 ++++
 p11-kit/p11-kit.h          |   59 ++
 p11-kit/p11-kit.pc         |   17 +
 p11-kit/p11-kit.pc.in      |   17 +
 p11-kit/pkcs11.h           | 1357 +++++++++++++++++++++++++++++++++++++++++++
 p11-kit/util.c             |   51 ++
 p11-kit/util.h             |   45 ++
 tests/Makefile.am          |    8 +-
 tests/uri-test.c           |   82 +--
 43 files changed, 7064 insertions(+), 6378 deletions(-)

commit 6132cd99c39739ef5360e41e92f22d287007577e
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-03-31

    WIP

 module/p11-kit-lib.c |  119 ++++++++++++++++++++++++++++++++++++++++++++++++++
 module/p11-kit-uri.c |   43 ++++++++++++++++++
 2 files changed, 162 insertions(+)

commit c45d9df39035dee8a3fff610d98ac3b4c245f1dc
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-03-31

    Fix for previous commit.
    
    Actually use the alloc_module_unlocked() function.

 module/p11-kit-lib.c |    4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 9985957799fd7142125f1d2dd0fae4366ec83f32
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-03-31

    Custom initialization and finalization arguments cannot be supported.
    
    When multiple consumers are using a PKCS#11 module, initialization
    (and finalization) arguments cannot be supported. The first one calling
    would win out, and the others would get unexpected behavior.

 module/p11-kit-lib.c     |  193 +++++++++++++++++++++++-----------------------
 module/p11-kit-private.h |    4 +-
 module/p11-kit-proxy.c   |    4 +-
 module/p11-kit.h         |    6 +-
 4 files changed, 104 insertions(+), 103 deletions(-)

commit 1104f03d9b34cc659838124e00ac864c35af4f82
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-03-03

    Add info and copyright.

 doc/p11-kit.xml |   42 ++++++++++++++++++++++++++++++++++--------
 1 file changed, 34 insertions(+), 8 deletions(-)

commit d05a04968e07f6a2084ceb747938dc7cc049cb5f
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-03-03

    The start of some documentation.

 .gitignore                       |    2 +
 Makefile.am                      |    2 +-
 configure.ac                     |    1 +
 doc/Makefile.am                  |   22 +++++++
 doc/docbook-params.xsl           |   39 +++++++++++++
 doc/p11-kit-config.xml           |  119 ++++++++++++++++++++++++++++++++++++++
 doc/p11-kit-multiple-problem.xml |   92 +++++++++++++++++++++++++++++
 doc/p11-kit.xml                  |   11 ++++
 8 files changed, 287 insertions(+), 1 deletion(-)

commit 25cbc9b3293f2c6df38bd0528b89101e5e547321
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-02-21

    Add uri function for listing which attribute types are present.

 module/p11-kit-uri.c |   24 +++++++++++++++++++++++-
 module/p11-kit-uri.h |    3 +++
 2 files changed, 26 insertions(+), 1 deletion(-)

commit ff7db14f0acae463165377f2d4b999e566298b40
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-02-21

    Fix bug where we try to dlclose() modules we didn't load.

 module/p11-kit-lib.c |    3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 1d9ca2ddb4df85b7235ec78e4996cf2d1fd775a2
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-02-19

    Reference implementation of PKCS#11 URIs

 .gitignore             |    1 +
 module/Makefile.am     |    3 +
 module/p11-kit-proxy.c |   14 +-
 module/p11-kit-uri.c   |  886 ++++++++++++++++++++++++++++++++++++++++
 module/p11-kit-uri.h   |  101 +++++
 module/p11-kit.h       |    2 +
 module/util.c          |   51 +++
 module/util.h          |   45 +++
 tests/Makefile.am      |    7 +-
 tests/uri-test.c       | 1050 ++++++++++++++++++++++++++++++++++++++++++++++++
 10 files changed, 2146 insertions(+), 14 deletions(-)

commit 65509aa3a7c35d8bd5a947ca87c14d4de11deb21
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-02-18

    Add p11_kit_strerror() method and internationalization.

 .gitignore                |    5 +
 ABOUT-NLS                 | 1281 +++++++++++++++++++++++++++++++++++++++++++++
 Makefile.am               |    4 +-
 configure.ac              |    4 +
 module/Makefile.am        |   14 +-
 module/p11-kit-lib.c      |    4 +-
 module/p11-kit-messages.c |  234 +++++++++
 module/p11-kit.h          |    2 +
 po/Makefile.in.in         |  444 ++++++++++++++++
 po/Makevars               |   41 ++
 po/POTFILES.in            |    2 +
 po/Rules-quot             |   47 ++
 po/boldquot.sed           |   10 +
 po/en@boldquot.header     |   25 +
 po/en@quot.header         |   22 +
 po/insert-header.sin      |   23 +
 po/p11-kit.pot            |  342 ++++++++++++
 po/quot.sed               |    6 +
 po/remove-potcdate.sin    |   19 +
 19 files changed, 2523 insertions(+), 6 deletions(-)

commit 5cc83571c3e0e212f4d84b05bb15088409d9c752
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-02-17

    Properly read user-config setting.
    
     * Unless the system 'user-config' setting is 'none' we allow
       the user to override or merge all settings, including the
       'user-config' setting.

 module/p11-kit-lib.c |  187 +++++++++++++++++++++++++++++++++++++++-----------
 1 file changed, 146 insertions(+), 41 deletions(-)

commit 80fe1806941d555433f3a1c97ab116dd281041e0
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-02-17

    Add a proper pkg-config file.

 .gitignore           |    2 ++
 configure.ac         |   25 ++++++++++++++-----------
 module/Makefile.am   |   10 +++++-----
 module/p11-kit.pc.in |   17 +++++++++++++++++
 4 files changed, 38 insertions(+), 16 deletions(-)

commit c03b1023835887569315fbec6295be3cc0f4cf42
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-02-17

    Only allow colon between name and value.

 module/conf.c           |    4 ++--
 tests/files/test-1.conf |    4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 14dfb79ca65dd80e117103c4f8852ae2b4a419a0
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-01-30

    Configuration tests.

 .gitignore              |    1 +
 module/conf.c           |   25 ++++++----
 module/conf.h           |    6 +--
 module/p11-kit-lib.c    |    8 ++--
 tests/Makefile.am       |   13 +++--
 tests/conf-test.c       |  121 +++++++++++++++++++++++++++++++++++++++++++++++
 tests/files/test-1.conf |    6 +++
 7 files changed, 158 insertions(+), 22 deletions(-)

commit 4375e297b19bc2177e17cc5616e75d96be053328
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-01-26

    Add testing and start testing hash table functionality.

 .gitignore               |    8 +
 Makefile.am              |   12 +-
 configure.ac             |   42 ++++++
 module/Makefile.am       |   16 +-
 module/hash.c            |   15 ++
 module/hash.h            |    5 +
 tests/Makefile.am        |   17 +++
 tests/cutest/CuTest.c    |  339 +++++++++++++++++++++++++++++++++++++++++
 tests/cutest/CuTest.h    |  116 ++++++++++++++
 tests/cutest/README.txt  |  211 ++++++++++++++++++++++++++
 tests/cutest/license.txt |   38 +++++
 tests/hash-test.c        |  377 ++++++++++++++++++++++++++++++++++++++++++++++
 12 files changed, 1191 insertions(+), 5 deletions(-)

commit f8009b4d504de0ed752b867893acd263108409e0
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-01-24

    Reinitialize modules after fork().

 module/p11-kit-lib.c     |   51 ++++++++++++++++++++++++++++++++++++++++++----
 module/p11-kit-private.h |    1 +
 module/p11-kit-proxy.c   |   18 ++++++++++++++++
 3 files changed, 66 insertions(+), 4 deletions(-)

commit b2b0acbc5789823a33de9eabec10e2b8656f3632
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-01-24

    Initial implementation with new config system.

 configure.ac             |    3 +-
 module/Makefile.am       |   10 +-
 module/conf.c            |  240 ++++++
 module/conf.h            |   51 ++
 module/hash.c            |  512 ++++++------
 module/hash.h            |  110 ++-
 module/p11-kit-lib.c     |  810 +++++++++++++++++++
 module/p11-kit-private.h |   51 ++
 module/p11-kit-proxy.c   | 1376 ++++++++++++++++++++++++++++++++
 module/p11-kit.c         | 1974 ----------------------------------------------
 module/p11-kit.h         |   12 +-
 11 files changed, 2885 insertions(+), 2264 deletions(-)

commit 5a53e44a73d4fb62483e890fe348ea40d27ef573
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-01-24

    Rename to p11-kit.
    
    A less pretentios, better description of what's going on.

 ChangeLog          |    2 +-
 configure.ac       |    4 +-
 module/Makefile.am |    8 +-
 module/p11-kit.c   | 1974 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 module/p11-kit.h   |   57 ++
 module/p11-unity.c | 1974 ----------------------------------------------------
 module/p11-unity.h |   57 --
 7 files changed, 2038 insertions(+), 2038 deletions(-)

commit 492c2ff7c191e5df75140a47e4e43fa25fd16023
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-01-22

    Rework public library API so that we can initialize arbitrary
    modules.

 module/p11-unity.c |  752 ++++++++++++++++++++++++++++++++++------------------
 module/p11-unity.h |   21 +-
 2 files changed, 502 insertions(+), 271 deletions(-)

commit c2a5aaf7baf4bcc006674a1938205f93028b8ab0
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-01-22

    Rough idea of possible library functions.

 configure.ac       |    5 +-
 module/p11-unity.c |  307 +++++++++++++++++++++++++++++++++++++++++++---------
 module/p11-unity.h |   56 ++++++++++
 3 files changed, 314 insertions(+), 54 deletions(-)

commit a50ba779ff3e0a5d4f35fb2b6ab525a423575cc4
Author: Stef Walter <stefw@collabora.co.uk>
Date:   2011-01-20

    Initial implementation of p11-unity

 .gitignore         |   31 ++
 AUTHORS            |    1 +
 COPYING            |   47 ++
 ChangeLog          |   31 ++
 Makefile.am        |   18 +
 NEWS               |    2 +
 README             |    1 +
 autogen.sh         |   21 +
 configure.ac       |   90 +++
 module/Makefile.am |   18 +
 module/hash.c      |  400 ++++++++++++++
 module/hash.h      |  158 ++++++
 module/p11-unity.c | 1543 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 module/pkcs11.h    | 1357 +++++++++++++++++++++++++++++++++++++++++++++
 14 files changed, 3718 insertions(+)
